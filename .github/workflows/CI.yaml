
  name: CI
  on:
    # Triggers the workflow on push or pull request events but only for the "main" branch
    push:
      branches: [ "main" ]
    pull_request:
      branches: [ "main" ]
  # Allows you to run this workflow manually from the Actions tab
    workflow_dispatch:

  jobs:
    # This workflow contains a single job called "build"
      Build_Docker:
      # The type of runner that the job will run on
        runs-on: ubuntu-latest

        steps:
          # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
          - name: checkout code
            uses: actions/checkout@v4

          - name: Set up QEMU
            uses: docker/setup-qemu-action@v3

          - name: Set up Docker Buildx
            uses: docker/setup-buildx-action@v3

          - name: Login to Docker Hub
            uses: docker/login-action@v3
            with:
              username: ${{ secrets.docker_user }}
              password: ${{ secrets.docker_pass }}

          - name: Build and push
            uses: docker/build-push-action@v6
            with:
              push: true
              tags: |
                lidico36/lidor-miriam-final:${{ github.sha }}
